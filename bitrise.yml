format_version: '11'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

project_type: ios

workflows:
  run_build:
    steps:
      - git-clone@8: {}
      - restore-cocoapods-cache@1: {}
      - restore-spm-cache@2: {}
      - cocoapods-install@2:
          inputs:
            is_cache_disabled: true
      - xcode-archive@4:
          inputs:
            project_path: Dayline.xcworkspace
            scheme: DaylineApp
            configuration: Release
            export_method: development
            xcconfig_content: COMPILER_INDEX_STORE_ENABLE=NO
      - save-cocoapods-cache@1: {}
      - save-spm-cache@2: {}
      - deploy-to-bitrise-io@2: {}

app:
  envs:
    - BITRISE_PROJECT_PATH: Dayline.xcworkspace
    - BITRISE_SCHEME: DaylineApp
    - BITRISE_EXPORT_METHOD: development
