format_version: "11"
default_step_lib_source: "https://github.com/bitrise-io/bitrise-steplib.git"

app:
  envs:
    - BITRISE_PROJECT_PATH: "Dayline.xcodeproj"
    - BITRISE_SCHEME: "DaylineApp"
    - BITRISE_EXPORT_METHOD: "development"

workflows:
  primary:
    steps:
      - git-clone@8: {}
      - cache-pull@2: {}
      - cocoapods-install@2:
          inputs:
            - command: "pod install"
      - xcode-build-for-simulator@0:
          inputs:
            - project_path: "$BITRISE_PROJECT_PATH"
            - scheme: "$BITRISE_SCHEME"
            - simulator_device: "iPhone 15"
            - simulator_os_version: "latest"
      - xcode-test@2:
          inputs:
            - project_path: "$BITRISE_PROJECT_PATH"
            - scheme: "$BITRISE_SCHEME"
      - cache-push@2: {}
